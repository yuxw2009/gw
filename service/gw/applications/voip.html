<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<meta http-equiv="content-type" content="text/html; charset=utf-8;"/>
<html>
<head>
<style>
video {
  border:5px solid black;
  width:320px;
  height:240px;
}
button {
  font: 18px sans-serif;
  padding: 8px;
}
input {
  font: 48px;
  padding: 16px;
}
textarea {
  font-family: monospace;
  margin: 2px;
  width:480px;
  height:40px;
}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="webrtc3.js"></script>

<script type="text/javascript">
function call_succ() {
  btn2.disabled = true;
  btn3.disabled = false;
}

function call_hookon() {
  btn2.disabled = false;
  btn3.disabled = true;
}

function voip_startcall() {
  var PhNo = document.getElementById('phno').value;

  voip_webcall(PhNo,call_succ,call_hookon);
}

function voip_stopcall() {
  voip_hangup();
  call_hookon();
}

function sendTone(N) {
  trace("dtmf "+N);
  if (N>=0 && N<=9)
    voip_event(N);
  else if (N=='*')
    voip_event(10);
  else if (N=='#')
    voip_event(11);
  else
    trace("unsupported dtmf.\n");
}

function createDialingPad() {
  var tones = '1234567890*#ABCD';
  var dialingPad = document.getElementById('dialingPad');
  for (var i = 0; i < tones.length; ++i) { 
    var tone = tones.charAt(i);
    dialingPad.innerHTML += '<button id="' + 
      tone + '" onclick="sendTone(\'' + tone +
      '\')" style="height:40px; width: 30px">' + tone + '</button>';
    if ((i + 1) % 4 == 0) {
      dialingPad.innerHTML += '<br>';
    } 
  }
}

</script>
</head>

<body>
<br>
<input id="phno" type="text" value = "008618018696036"/>
<br>
<button id="btn1" onclick="getaudio()">GetMedia</button>
<button id="btn2" onclick="voip_startcall()">Call</button>
<button id="btn3" onclick="voip_stopcall()">Hang Up</button>
<button id="btn4" onclick="releaseaudio()">ReleaseMedia</button>
<br>
<video id="vid1" autoplay></video>
<video id="vid2" autoplay></video>
<br>
<div id="status"> </div>
<div id="dialingPad"></div>

<script type="text/javascript">
btn1.disabled = false;
btn2.disabled = false;
btn3.disabled = true;
btn4.disabled = true;

createDialingPad()
</script>

</body>
</html>