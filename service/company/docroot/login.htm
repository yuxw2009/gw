<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="style/login.css" />
<title>ZTE员工管理系统-登录</title>
</head>
<body>
<div id="contianer">
  <div class="logo"> </div>
  <ul>
    <li>
      <label>公司</label>
      <input class="company" type="text" value="" />
    </li>
     <li class="itips companyTips">
      <span>* 公司名不能为空！</span>
    </li>
    <li>
      <label>账号</label>
      <input class="usename" type="text" value="" />
    </li>
    <li class="itips userNameTips">
      <span>* 账号不能为空！</span>
    </li>
    <li>
      <label>密码</label>
      <input class="password" type="password" value="" />
    </li>
     <li class="itips passwordTips">
      <span>* 密码不能为空！</span>
    </li>
  </ul>
  <a type="submit" id="submit" class="btn" />登录 </a>
</div>
</body>
<script type="text/javascript" src="script/jquery-1.6.3.min.js?t=20120528"></script>  
<script type="text/javascript" src="script/jquery.cookie.js?t=20120528"></script>          
<script type="text/ecmascript">
	 var setHeight=function(){
		 var clientHeight = document.documentElement.clientHeight > document.body.clientHeight ? document.documentElement.clientHeight :document.body.clientHeight;
		 $('#contianer').css('margin-top',(clientHeight-260)/2).show();
	 }
	 setHeight()

	$('#contianer').find('input:first').focus();
	window.onresize = function () { 
	   setHeight()
	};	
	$('input.company').keyup(function(){			 
		$('.companyTips').css('visibility','hidden');
	})	
	$('input.usename').keyup(function(){			 
		$('.userNameTips').css('visibility','hidden');
	})		  
	$('input.password').keyup(function(){			 
		$('.passwordTips').css('visibility','hidden');
	})
	
	$('#submit').click(function(){
		var company = $('input.company').val();
		var userName = $('input.usename').val();
		var password = $('input.password').val();

		if(''===company){
		  $('.companyTips').text('* 公司名不能为空！').css('visibility','visible');
		  $('input.company').focus();
		  return false;
		}		

		if(''===userName){
		  $('.userNameTips').text('* 账号不能为空！').css('visibility','visible');
		  $('input.usename').focus();
		  return false;
		}
		if(''===password){
		  $('.passwordTips').css('visibility','visible');
		  $('input.password').focus();
		    return false;
		}
	  $.ajax({
			type: "post",
			url: 'service.yaws',	
			dataType: "json",
			data:{'command': 'login', 'company': company, 'username': userName,'password': password, 't': new Date().getTime()},
			contentType: "application/json; charset=utf-8",
			success: function (data) {
				if(data.message=='ok'){
				    $.cookie("userName", userName);
					window.location.href = "index.html";						
				}else{				
		           $('.userNameTips').text('用户名或密码有误，请重新输入！').css('visibility','visible');
				   $('input.usename').focus();

				}				
			}
	  });	  
	})
	
	        document.onkeydown = function (event) {
            e = event ? event : (window.event ? window.event : null);
            if (e.keyCode == 13) {
                $('#submit').click()
                return false;
            }
        }
</script>
</html>
